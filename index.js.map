{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49287567-80da5b96f25a95ab41aa198b2';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImages(searchQuery, page, per_page = 15) {\n  const params = {\n    page,\n    per_page,\n    key: API_KEY,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n  const { data } = await axios(`${BASE_URL}`, { params });\n\n  return data;\n}\n","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryListEl = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function clearGalleryList() {\n  galleryListEl.innerHTML = '';\n}\n\nexport function renderGalleryList(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <div class=\"photo-card\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" />\n            <div class=\"info\">\n              <p><b>Likes:</b> ${likes}</p>\n              <p><b>Views:</b> ${views}</p>\n              <p><b>Comments:</b> ${comments}</p>\n              <p><b>Downloads:</b> ${downloads}</p>\n            </div>\n          </div>\n        </a>\n        </li>`\n    )\n    .join('');\n  galleryListEl.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImages } from './js/pixabay-api';\nimport { clearGalleryList, renderGalleryList } from './js/render-functions';\n\nconst formEl = document.querySelector('.form');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtnEl = document.querySelector('.loadMoreBtn');\nconst per_page = 15;\nlet inputValue = '';\nlet page = 1;\n\nformEl.addEventListener('submit', onFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  inputValue = formEl.elements['search-text'].value.trim();\n\n  if (!inputValue) {\n    iziToast.info({\n      position: 'topRight',\n      message: 'wrong!',\n    });\n    return;\n  }\n  page = 1;\n  hideLoadMoreBtn();\n  showLoader();\n  clearGalleryList();\n  try {\n    const { hits, totalHits } = await getImages(inputValue, page, per_page);\n\n    if (hits.length === 0) {\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n\n    renderGalleryList(hits);\n    showLoadMoreBtn();\n    checkEndColection(totalHits, page, per_page);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function onLoadMoreBtnClick(e) {\n  page++;\n  hideLoadMoreBtn();\n  showLoader();\n  try {\n    const { hits, totalHits } = await getImages(inputValue, page, per_page);\n    renderGalleryList(hits);\n    showLoadMoreBtn();\n    checkEndColection(totalHits, page, per_page);\n    const { height } = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect();\n    window.scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\nfunction checkEndColection(totalHits, page, per_page) {\n  const totalPage = Math.ceil(totalHits / per_page);\n\n  if (totalPage === page) {\n    hideLoadMoreBtn();\n    iziToast.info({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n}\n\nfunction showLoader() {\n  loaderEl.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loaderEl.classList.add('hidden');\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtnEl.classList.remove('hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtnEl.classList.add('hidden');\n}\n"],"names":["API_KEY","BASE_URL","getImages","searchQuery","page","per_page","params","data","axios","galleryListEl","lightbox","SimpleLightbox","clearGalleryList","renderGalleryList","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formEl","loaderEl","loadMoreBtnEl","inputValue","onFormSubmit","onLoadMoreBtnClick","e","iziToast","hideLoadMoreBtn","showLoader","hits","totalHits","showLoadMoreBtn","checkEndColection","error","hideLoader","height"],"mappings":"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"}